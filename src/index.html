<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Electris</title>

  <meta name="description" content="A Tetris game made explicitly with HTML5, JavaScript, and without jQuery and other JS libraries.">
  <meta name="keywords" content="HTML5,JavaScript,Tetris,Game,Asynchronous,CSS3">
  <meta name="author" content="Jared Gotte">

  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <button class="topButton" id="minimizeButton">&ndash;</button>
  <button class="topButton" id="closeButton">&times;</button>
  <main id="main">
    <!-- Banner inspired from font: The FontStruction "Tetromino (by Piotr
    Klarowski)" (http://fontstruct.com/fontstructions/show/118906) by
    "ecaGraphics" -->
    <h1><img id="tetris-banner" src="img/TETRIS.png" alt="Tetris logo"></h1>
    <section class="panel" id="public-controls" aria-labelledby="public-controls-title">
      <h2 id="public-controls-title">Controls</h2>
      <ul>
        <li>
          <h3>Control</h3>
          <h3>Key</h3>
        </li>
        <li>
          <div>
            <span>Rotate</span>
          </div>
          <span><strong>Up</strong> Arrow Key</span>
        </li>
        <li>
          <div>
            <span>Move Left</span>
          </div>
          <span><strong>Left</strong> Arrow Key</span>
        </li>
        <li>
          <div>
            <span>Move Right</span>
          </div>
          <span><strong>Right</strong> Arrow </span></li>
        <li>
          <div>
            <span>Move Down</span>
          </div>
          <span><strong>Down</strong> Arrow </span>
        </li>
        <li>
          <div>
            <span>Instantly Move Down</span>
          </div>
          <span><strong>Space</strong> Bar</span>
        </li>
        <br>
        <li>
          <div>
            <span>Pause Game</span>
          </div>
          <span><strong>S</strong> or <strong>P</strong> Key</span>
        </li>
        <li>
          <div>
            <span>Restart Game</span>
          </div>
          <span><strong>R</strong> Key</span>
        </li>
      </ul>
    </section>
    <canvas id="canvas"></canvas>
    <section class="panel" id="high-scores" aria-labelledby="high-scores-title">
      <h2 id="high-scores-title">High Scores</h2>
      <ol id="high-scores-list"></ol>
    </section>
  </main>
  <div id="footer">
    <span>&copy; 2018 <a href="http://www.jaredgotte.com/">Jared Gotte</a>; licensed under <a href="https://opensource.org/licenses/ISC">ISC</a></span>
  </div>

  <script src="../built/tetris.js"></script>
  <script>
    const {remote} = require('electron')

    // Minimize window when "– button" at top right is clicked  
    const minimizeButton = document.getElementById('minimizeButton')
    minimizeButton.addEventListener('click', function (event) {
      remote.getCurrentWindow().close()
    })

    // Close window when "× button" at top right is clicked
    const closeButton = document.getElementById('closeButton')
    closeButton.addEventListener('click', function (event) {
      remote.getCurrentWindow().close()
    })

    // Open any links externally by default
    const shell = require('electron').shell
    document.addEventListener('click', function(event) {
      const target = event.target
      if (target.tagName === 'A' && target.href.startsWith('http')) {
        event.preventDefault()
        shell.openExternal(target.href)
      }
    })

    // Initialize game
    Game('canvas', 'high-scores-list')
  </script>
</body>
</html>
